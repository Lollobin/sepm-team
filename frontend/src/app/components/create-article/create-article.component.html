<div class="container mt-3" *ngIf="success">
  <div class="alert alert-success" role="alert">
    <h4 class="alert-heading">Success!</h4>
    <strong>Successfully</strong> created article "<strong>{{title}}</strong>"
    <p></p>
    <button type="button" class="btn-close" (click)="vanishSuccess()" data-bs-dismiss="alert"
            aria-label="Close"></button>
  </div>
</div>

<app-error-alert [error]="error"></app-error-alert>

<div class="container-md" style="max-width: 1000px">

  <h2 style="margin-top: 5%">Create Article</h2>

  <form [formGroup]="articleForm" style="margin-top: 4%">
    <div class="row">

      <div class="form-group">
        <small for="validationDefault01" class="form-label text-muted"> Title </small>
        <input type="text" class="form-control" id="validationDefault01" formControlName="title">
      </div>
      <div *ngIf="articleForm.get('title').touched || submitted" class="error">
        <small
            class="form-text text-warning"
            *ngIf="articleForm.get('title').errors?.required"
        >Title must be filled in!
        </small>
      </div>
      <div class="form-group">
        <small for="validationDefault02" class="form-label text-muted"> Summary</small>
        <textarea type="text" class="form-control" id="validationDefault02"
                  formControlName="summary"></textarea>
      </div>
      <div *ngIf="articleForm.get('summary').touched || submitted" class="error">
        <small
            class="form-text text-warning"
            *ngIf="articleForm.get('summary').errors?.required"
        >Summary must be filled in!
        </small>
      </div>
      <div class="form-group">
        <small for="validationDefault03" class="form-label text-muted"> Text </small>
        <textarea type="text" class="form-control" id="validationDefault03"
                  formControlName="text"></textarea>
      </div>
      <div *ngIf="articleForm.get('text').touched || submitted" class="error">
        <small
            class="form-text text-warning"
            *ngIf="articleForm.get('text').errors?.required"
        >Text must be filled in!
        </small>
      </div>


      <div>
        <div class="form-group" style="margin: 4% auto 0 auto; position: relative">
          <input type="file" multiple accept="image/png, image/jpeg" class="form-control"
                 id="inputGroupFile04" aria-describedby="inputGroupFileAddon04"
                 aria-label="Upload"
                 (change)="onFileChange($event)"/>


        </div>
        <div>
          <small style="position: relative"
                 class="form-text text-black" for="inputGroupFile04"
          >Accepted Formats: jpg, jpeg, png
          </small>
        </div>

        <div class="form-group" style="margin-top: 3%">
          <img *ngFor='let preview of previews' [src]="preview" class="preview" alt="preview">
        </div>


      </div>
    </div>
    <button style="margin-bottom: 2%; margin-top: 4%"
            [disabled]="!articleForm.valid && (articleForm.get('title').touched || articleForm.get('text').touched || articleForm.get('summary').touched) || (submitted && (articleForm.get('title').value === '' || articleForm.get('text').value === ''  || articleForm.get('summary').value === '' ))  "
            class="btn btn-primary" (click)="createArticle()">Create Article
    </button>
  </form>

</div>



